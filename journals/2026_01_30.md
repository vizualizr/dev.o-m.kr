date-created:: [[2026-01-30]]
date-modified:: [[2026-02-04]] 
division:: [[makr]]
stack:: gsap, lenis
tags:: 
type:: 
alias:: 스크롤 인터랙션 엔진 이해 및 PoC 코드 분석
public:: true
status:: [[ai-generated]]

- ## Summary
	- 예시 코드를 바탕으로 Lenis 및 GSAP의 작동 원리를 익힘
	- 브라우저의 '합성(Compositing)' 프로세스를 고려한 Lenis, GSAP
	- 에이전트가 생성한 PoC(Proof of Concept) 코드를 통해 스크롤-애니메이션-데이터 시각화(D3.js)가 결합된 아키텍처를 100% 이해 완료함.
	- 현재 단일 파일로 구성된 로직을 Astro 프레임워크의 컴포넌트 단위로 분할하기 위한 전략 수립 단계에 진입함.
- ## Steps
	- **이론 체계 수립**:
		- 메인 스레드(JS, Layout, Paint)와 합성 스레드(GPU 통신, Scrolling)의 역할 분담 명확화.
		- `transform`, `opacity` 속성이 왜 리페인트(Repaint)를 피하고 성능을 높이는지 합성 단계의 메커니즘으로 증명.
	- **기술적 동기화 원리 분석**:
		- **Lenis**: 브라우저의 기본 스크롤 입력을 `requestAnimationFrame`으로 가로채 부드러운 가속도 구현.
		- **GSAP**: `lagSmoothing`을 통해 메인 스레드 병목 시에도 합성 스레드의 위치와 애니메이션 프레임을 강제 동기화.
	- **PoC 소스 코드 해부 (Line 1~250)**:
		- `Lenis` 전역 초기화 및 `ScrollTrigger.update` 연동 구조 확인.
		- `d3.js`를 이용한 SVG 렌더링과 GSAP `ScrollTrigger`의 `sticky-wrapper` 연동 방식 검증.
		- 리사이즈 대응을 위한 `gsap.context()` 초기화 및 디바운싱 로직 파악.
- ## Troubleshooting
	- **상태 불일치(Lag) 대응**: 합성 스레드가 이동시킨 화면 위치와 메인 스레드의 애니메이션 연산 속도 차이로 인한 지연을 Lenis의 좌표 강제 이동과 GSAP의 시간 보정(lagSmoothing)으로 해결하는 로직 정립.
- ## log
	- [[2026-01-30]] 11:16 작업 시작 및 대기.
	- [[2026-01-30]] 15:54 브라우저 합성 엔진(Compositor Thread) 이론 정리 완료.
	- [[2026-01-30]] 17:09 통합 인터랙티브 코드 분석 완료 및 아키텍처 이해 완료.
	- [[2026-01-30]] 17:15 **[[DOING]]** Astro 컴포넌트 분할 및 아일랜드 아키텍처 적용 방안 구상 시작.
- ### References
	- [[브라우저/합성 스레드]]
	- [[lenis, GSAP]]
	- Window: requestAnimationFrame() 메서드 - Web API | MDN